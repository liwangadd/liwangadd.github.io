---
title: Manjaro安装配置
categories: Linux
tags:
  - Linux
  - Tools
abbrlink: 33ff7b7
date: 2018-07-15 22:34:05
---

## 0. 安装

启动时选择第二项boot（non-free),Manjaro自带的驱动精灵会帮你安装好所需驱动，笔记本双显卡则会帮你安装bumblebee
driver boot（non-free)

如果是WIndows+Manjaro双系统安装，

步骤可以参考：<https://my.oschina.net/langxSpirit/blog/1633384>

![img](http://windylee-blog.oss-cn-beijing.aliyuncs.com/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180713100120.png)

<!-- more -->

## 1.系统信息

查看系统信息

```
inxi -Fx 
```

## 2.网络设置

查看网络状态

```
ping 8.8.8.8
```

\------------
connect: Network is unreachable
\------------
如果网卡驱动是正常，请尝试手动设置IP地址、网关、DNS信息

## 3.笔记本双显卡设置

查看显卡NVIDIA状态

```
lspci| grep -i vga
```

01:00.0 VGA compatible controller: NVIDIA Corporation GK107M [GeForce GTX 660M] (rev ff)
Nvidia 卡信息的末尾是 rev ff，表示独显已经关闭。现在运行的是intel核显，这正是我们安装bumblebee目的。
bumblebee的作用是禁用nvidia独立显卡，需要使用独显时，使用”optirun 程序名“手动开启nvidia来运行需要加速的程序，如optirun vmware。

https://wiki.archlinux.org/index.php/Bumblebee
https://wiki.archlinux.org/index.php/Bumblebee_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)
要使用 Bumblebee，请确保添加你的用户到 bumblebee 组：
$  gpasswd -a svenaugustus bumblebee #gpasswd -a 您的用户名 bumblebee
启用服务：

```
systemctl enable bumblebeed.service
```

重启
测试 Bumblebee 是否工作：

```
optirun glxgears -info
```

如果一个内有动画的窗口出现，那么 Optimus 和 Bumblebee 正在工作。
\------------------
NVIDIA(0): Failed to assign any connected display devices to X screen 0
如果终端输出如下:
[ERROR]Cannot access secondary GPU - error: [XORG] (EE) NVIDIA(0): Failed to assign any connected display devices to X screen 0
[ERROR]Aborting because fallback start is disabled.
你要修改 /etc/bumblebee/xorg.conf.nvidia 里的这行:
Option "ConnectedMonitor" "DFP"
为:
Option "ConnectedMonitor" "CRT"
\------------------
打开N卡设置：

```
optirun nvidia-settings -c :8
```

如果需要不依赖Bumblebee来使用CUDA, 为开启NVIDIA显卡，运行:

```
sudo tee /proc/acpi/bbswitch <<< ON
```

注意，重启完N卡又会回复关闭状态。

## 4.时间和日期

如果安装的是双系统，注意Manjaro Setting Manager > Time and Date勾选以下选项
--set time and date automatically
--hardware clock in local time zone

![img](http://windylee-blog.oss-cn-beijing.aliyuncs.com/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180713102249.png)
If you has Windows as well, please install NTP. http://www.satsignal.eu/ntp/setup.html
Tips: NTP server ,please select your nearest country or region from the drop-down list.
Here are some links in chinese: http://blog.csdn.net/aaazz47/article/details/78696899
\#如果你装了双系统，那么Windows系统需要装NTP同步为UTC时间，或者委屈Manjaro使用本地时间localtime。

## 5.源镜像与系统更新

排列源

```
sudo  pacman-mirrors -i -c China -m rank   #只留下清华源能令带宽跑满
```

同步并优化（类似磁盘整理，固态硬盘无需操作）$  sudo pacman-optimize && sync

增加archlinuxcn库和antergos库

```
echo -e "\n[archlinuxcn]\nSigLevel = TrustAll\nServer = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/\$arch\n\n[antergos]\nSigLevel = TrustAll\nServer = https://mirrors.tuna.tsinghua.edu.cn/antergos/\$repo/\$arch\n"|sudo tee -a /etc/pacman.conf
```

升级系统：

```
sudo pacman -Syyu
```

安装archlinuxcn签名钥匙&antergos签名钥匙

```
sudo pacman -S --noconfirm archlinuxcn-keyring antergos-keyring
```

## 6.中文输入法

安装搜狗输入法#xfce桌面

```
sudo pacman -S --noconfirm fcitx-im fcitx-configtool fcitx-sogoupinyin 
```

安装搜狗输入法#kde桌面

```
sudo pacman -S --noconfirm fcitx-im kcm-fcitx fcitx-sogoupinyin 
```

\#配置fcitx

```
sudo echo -e "export GTK_IM_MODULE=fcitx\nexport QT_IM_MODULE=fcitx\nexport XMODIFIERS=@im=fcitx">>~/.xprofile
```

then restart.

![img](https://static.oschina.net/uploads/space/2018/0319/122055_Axzl_155593.png)

fcitx的激活输入法方式改为ctrl+逗号,避免jetbrains系列快捷键冲突
额外的激活输入法快捷键禁用
输入法切换取消,上一页下一页改为逗号句号
在窗口间共享状态改为所有(所有的话就是windows的习惯)

![img](http://windylee-blog.oss-cn-beijing.aliyuncs.com/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180713102651.png)

\#对于jetbrians系列fcitx无法跟随的情况 fcitx输入法配置>附加组件>勾选高级>xim前端>勾选on the spot

![img](http://windylee-blog.oss-cn-beijing.aliyuncs.com/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180713102838.png)

 

## 7.中文汉化

\#切换系统语言为中文，可以在登录界面右下角选择zh_CN.utf8然后重启
login screen choose zh_CN.UTF8
then restart.

```
sudo pacman -S --noconfirm firefox-i18n-zh-cn thunderbird-i18n-zh-cn gimp-help-zh_cn libreoffice-still-zh-CN man-pages-zh_cn
```

7-1.火狐汉化
https://support.mozilla.org/en-US/kb/use-firefox-interface-other-languages-language-pack
安装火狐汉化
$  sudo pacman -S firefox-i18n-zh-cn
在add-ons检查language是否已包含。如果已包含，在火狐浏览器中敲about:config然后回车。
搜索intl.locale.requested
如果没有那么右键new一个 键是 intl.locale.requested 值 是 zh_CN。
最后重启Firefox,解决。

## 8.中文字体

```
sudo pacman -S --noconfirm wqy-microhei && fc-cache -fv
```

安装完可以 在"外观>字体"中设置应用程序的默认字体。
可以在"QT5设置>字体"设置qt窗体的默认字体。
还可以在各个应用程序中，如notepadqq中设置显示的字体。
其他文泉驿家族：
$  sudo pacman -S wqy-microhei-lite
$  sudo pacman -S wqy-bitmapfont
$  sudo pacman -S wqy-zenhei
选用：
$  sudo pacman -S adobe-source-han-sans-cn-fonts
$  sudo pacman -S adobe-source-han-serif-cn-fonts
$  sudo pacman -S noto-fonts-cjk

## 9.AUR助手yaourt

Manjaro有自己的图形化包管理器,pamac，当然也可以命令行使用archlinux系的，还有AUR助手 yaourt 更方便。
Yaourt可用于查找软件包(包括[core][extra] [community] AUR的软件包，pacman只能查找非AUR的软件包)。

```
sudo pacman -S --noconfirm yaourt
```

## 10.桌面菜单或启动器

应用程序配置项，即 .desktop 文件是原信息资源和应用程序快捷图标的集合。
系统程序的配置项通常位于 /usr/share/applications 或 /usr/local/share/applications目录，单用户安装的程序位于 ~/.local/share/applications 目录，优先使用用户的配置项。

```
cd ~/.local/share/applications
```

[Desktop Entry]
Type=Application
Version=1.0
Name=IntelliJ IDEA
Exec=/opt/ide/idea/bin/idea.sh
Icon=/opt/ide/idea/bin/idea.png
Terminal=false
Categories=Development;Languages;Java;

## 11.快速设置

- 系统全面更新

```
sudo pacman -Syyu --noconfirm
```

- 登录后开启数字锁

```
yaourt -S --noconfirm systemd-numlockontty&&sudo systemctl enable numLockOnTty.service
```

- 安装常用软件

```
yaourt -Sy --noconfirm netease-cloud-music smplayer smplayer-skins smplayer-themes google-chrome sublime-text-dev-zh-cn masterpdfeditor remarkable uget filezilla shadowsocks-qt5 deepin-screenshot shutter
```

netease-cloud-music 网易云音乐；
smplayer 视频播放器；
google-chrome 谷歌浏览器；
notepadqq 像notepad++文本编辑；
sublime-text-dev-zh-cn 强大的开发必备文本编辑器；(有能力采用付费许可证)
masterpdfeditor 对linux用户免费的PDF浏览及编辑器，支持实时预览；
remarkable 卓越且功能齐全的 Markdown 编辑器；
uget 媲美迅雷的下载工具；
filezilla 强大的FTP工具；
shadowsocks-qt5 翻墙工具，配合浏览器插件SwitchyOmega使用；
deepin-screenshot 深度截图工具；
shutter 强大的截图工具，gnome-web-photo配合使用；
variety 随即更换壁纸的应用；
ccal 终端农历日历，终端启动ccal；

```
yaourt -Sy --noconfirm bleachbit redshift 
```

bleachbit 快速释放磁盘空间并不知疲倦地守卫你的隐私。释放缓存，删除 cookie，清除互联网浏览历史，清理临时文件，删除日志，以及更多功能...
i-nex 小而全的系统信息查看软件；
redshift 根据你的周边调整你屏幕的色温。当你夜晚在屏幕前工作时，它也许能帮助你减少对眼睛的伤害；

```
yaourt -Sy --noconfirm keepassx-git screenfetch-git freefilesync #需要网络git
```

keepassx-git 密码管理器；
screenfetch-git  系统信息工具，终端使用screenfetch命令；
freefilesync 文件夹比较和同步工具； 

- 生产力

```
yaourt -Sy --noconfirm wiznote meld goldendict easystroke catfish peek
```

wiznote 为知笔记；
meld 文本比较；
goldendict 词典软件；
easystroke 鼠标手势；
catfish 基于GTK+的非常快速，轻量级的文件搜索工具；
peek 屏幕录像工具，小巧玲珑，可保存录像为gif动图和兼容于html5的webm视频；

```
yaourt -Sy --noconfirm xmind  #需要网络
```

xmind 跨平台的思维导图工具，关键还是可以导入MindManage的文件；

- 编程开发

```
yaourt -Sy --noconfirm eclipse-jee jetbrains-toolbox openjdk8-doc openjdk8-src dbeaver dbeaver-plugin-apache-poi dbeaver-plugin-batik dbeaver-plugin-office 
```

eclipse-jee 企业Java 集成开发环境；
jetbrains-toolbox 著名的jetbrains序列的IDE管理工具；
openjdk8-doc openjdk8-src 针对OpenJDK8的文档和源码；
dbeaver 通用数据库客户端，支持多个平台及多种数据库，社区版是免费的；  

```
yaourt -Sy --noconfirm nginx tomcat8 zookeeper
```

dbeaver 通用数据库客户端，支持多个平台及多种数据库，社区版是免费的；
nginx 终端执行 sudo nginx 启动，sudo nginx -s stop/realod 停止或重启；
tomcat8 开发必备，轻量的应用服务器；
zookeeper 终端执行sudo zkServer.sh start 启动； 

- 虚拟机（全面更新系统重启后最后安装）

```
sudo pacman -Sy virtualbox linux414-virtualbox-host-modules virtualbox-ext-oracle
```

virtualbox 虚拟机工具，linux首选，比vmware还好用。

linux414-virtualbox-host-modules  根据安装的内核版本选择，比如有 uname -r 如果是4.14内核，则安装 linux414-virtualbox-host-modules ；

- 展示Linux系统信息(装逼)

```
screenfetch
```

![img](http://windylee-blog.oss-cn-beijing.aliyuncs.com/%E6%B7%B1%E5%BA%A6%E6%88%AA%E5%9B%BE_%E9%80%89%E6%8B%A9%E5%8C%BA%E5%9F%9F_20180713103632.png)